/**
 *
 * Heavily modified by Shawn Sijnstra to run using Agon Light features
 * 
 * 
 *  @file
 * @author Hamik Mukelyan
 *
 * Drives a text-based Flappy Bird knock-off that is intended to run in an
 * 80 x 24 console.
 */

#include <acurses.h>
//#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <assert.h>
#include <limits.h>

//-------------------------------- Definitions --------------------------------

/**
 * Represents a vertical pipe through which Flappy The Bird is supposed to fly.
 */
typedef struct vpipe {

	/*
	 * The height of the opening of the pipe as a fraction of the height of the
	 * console window.
	 */
	float opening_height;

	/*
	 * Center of the pipe is at this column number (e.g. somewhere in [0, 79]).
	 * When the center + radius is negative then the pipe's center is rolled
	 * over to somewhere > the number of columns and the opening height is
	 * changed.
	 */
	int center;
} vpipe;

/** Represents Flappy the Bird. */
typedef struct flappy {
	/* Height of Flappy the Bird at the last up arrow press. */
	int h0;

	/* Time since last up arrow pressed. */
	int t;
} flappy;

//------------------------------ Global Constants -----------------------------

/** Gravitational acceleration constant */
const float GRAV = 0.05;

/** Initial velocity with up arrow press */
const float V0 = -0.5;

/** Number of rows in the console window. */
const int NUM_ROWS = 26; //floor goes here

const int FLOOR_ROWS = 3;	//number of rows in the floor

/** Number of columns in the console window. */
const int NUM_COLS = 80;

/** Radius of each vertical pipe. */
const int PIPE_RADIUS = 3; // won't be able to change this with graphics version

/** Width of the opening in each pipe. */
const int OPENING_WIDTH = 7;

/** Flappy stays in this column. */
const int FLAPPY_COL = 10;

/** Aiming for this many frames per second. */
const float TARGET_FPS = 20; //24 was the default.

/** Amount of time the splash screen stays up. */
const float START_TIME_SEC = 3;

/** Length of the "progress bar" on the status screen. */
const int PROG_BAR_LEN = 76;

/** Row number at which the progress bar will show. */
const int PROG_BAR_ROW = 22;

const int SCORE_START_COL = 62;

//------------------------------ Global Variables -----------------------------

/** Frame number. */
volatile int frame = 0;

/** Number of pipes that have been passed. */
int score = 0;

/** Number of digits in the score. */
int sdigs = 1;

/** Best score so far. */
int best_score = 0;

/** Number of digits in the best score. */
int bdigs = 1;

/** The vertical pipe obstacles. */
vpipe p1, p2;

//---------------------------------- Functions --------------------------------

/**
 * Converts the given char into a string.
 *
 * @param ch Char to convert to a string.
 * @param[out] str Receives 'ch' into a null-terminated C string. Assumes
 * str had 2 bytes allocated.
 */
void chtostr(char ch, char *str) {
	str[0] = ch;
	str[1] = '\0';
}

/**
 * "Moving" floor and ceiling are written into the window array.
 *
 * @param ceiling_row
 * @param floor_row
 * @param ch Char to use for the ceiling and floor.
 * @param spacing Between chars in the floor and ceiling
 * @param col_start Stagger the beginning of the floor and ceiling chars
 * by this much
 */


static char floor1[81] = {
		0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89,
		0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89,
		0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89,
		0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x00};

static char floor2[81] = {
		0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B,
		0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B,
		0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B,
		0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x00};

static char floor3[81] = {
		0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88,
		0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88,
		0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88,
		0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x89, 0x88, 0x00};

static char floor4[81] = {
		0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A,
		0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A,
		0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A,
		0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x8B, 0x8A, 0x00};

void draw_floor_and_ceiling(int i) {

//	int i;
//	i = frame & 3;

//	for (i = col_start; i < NUM_COLS - 1; i += spacing) {
//		if (i < SCORE_START_COL - sdigs - bdigs)
//			mvprintw(ceiling_row, i, c);
//		mvprintw(floor_row+1, i, c);
//	}
	switch (i) {
	case 0:
		mvaddstr(NUM_ROWS+1,0,floor4);break;
	case 1:
		mvaddstr(NUM_ROWS+1,0,floor3);break;
	case 2:
		mvaddstr(NUM_ROWS+1,0,floor2);break;
	case 3:
		mvaddstr(NUM_ROWS+1,0,floor1);break;
	}
}

/**
 * Updates the pipe center and opening height for each new frame. If the pipe
 * is sufficiently far off-screen to the left the center is wrapped around to
 * the right, at which time the opening height is changed.
 */
void pipe_refresh(vpipe *p) {

	// If pipe exits screen on the left then wrap it to the right side of the
	// screen.
	if(p->center + PIPE_RADIUS < 0) {
		p->center = NUM_COLS + PIPE_RADIUS;

		// Get an opening height fraction.
		p->opening_height = rand() / ((float) INT_MAX) * 0.5 + 0.25;
		score++;
		if(sdigs == 1 && score > 9)
			sdigs++;
		else if(sdigs == 2 && score > 99)
			sdigs++;
	}
	p->center--;
}

/**
 * Gets the row number of the top or bottom of the opening in the given pipe.
 *
 * @param p The pipe obstacle.
 * @param top Should be 1 for the top, 0 for the bottom.
 *
 * @return Row number.
 */
int get_orow(vpipe p, int top) {
	return p.opening_height * (NUM_ROWS - 1) -
			(top ? 1 : -1) * OPENING_WIDTH / 2;
}

/**
 * Draws the given pipe on the window using 'vch' as the character for the
 * vertical part of the pipe and 'hch' as the character for the horizontal
 * part.
 *
 * @param p
 * @param vch Character for vertical part of pipe
 * @param hcht Character for horizontal part of top pipe
 * @param hchb Character for horizontal part of lower pipe
 * @param ceiling_row Start the pipe just below this
 * @param floor_row Star the pipe jut above this
 */
void draw_pipe(vpipe p, char vch, char hcht, char hchb,
		int ceiling_row, int floor_row) {
	int i, start_column;
//	char cu[4] = {vch,0x08,0x0A,0x00};
	start_column = p.center - PIPE_RADIUS;

		if ((start_column) >= 0 &&
				(start_column) < NUM_COLS - 1) {
		// Draw vertical part of upper half of pipe.
		for(i = ceiling_row; i < get_orow(p, 1); i++) {
			mvaddch(i, start_column, vch);
		}
			mvaddch(i, start_column, hcht);	// Draw horizontal part of upper pipe.
		// Draw vertical part of lower half of pipe.
		for(i = floor_row - 1; i > get_orow(p, 0); i--) {
			mvaddch(i, start_column, vch);
		}
			mvaddch(i, start_column, hchb);	// Draw horizontal part of lower pipe.
	}
}

/**
 * Get Flappy's height along its parabolic arc.
 *
 * @param f Flappy!
 *
 * @return height as a row count
 */
int get_flappy_position(flappy f) {
	return f.h0 + V0 * f.t + 0.5 * GRAV * f.t * f.t;
}

/**
 * Returns true if Flappy crashed into a pipe.
 *
 * @param f Flappy!
 * @param p The vertical pipe obstacle.
 *
 * @return 1 if Flappy crashed, 0 otherwise.
 */
int crashed_into_pipe(flappy f, vpipe p) {
	if (FLAPPY_COL >= p.center - PIPE_RADIUS - 1 &&
			FLAPPY_COL <= p.center + PIPE_RADIUS + 1) {

		if (get_flappy_position(f) < get_orow(p, 1)  + 1 ||
				get_flappy_position(f) > get_orow(p, 0) - 1) {
			return 1;
		}
	}
	return 0;
}

/**
 * Prints a failure screen asking the user to either play again or quit.
 *
 * @return 1 if the user wants to play again. Exits the program otherwise.
 */
int failure_screen() {
	char ch;
	clear(); vdp_set_text_colour(COLOR_WHITE + 8 );
	mvprintw(NUM_ROWS / 2 - 1, NUM_COLS / 2 - 22,
			"Flappy died :-(. <Enter> to flap, 'q' to quit.\n");
	refresh();
	timeout(-1); // Block until user enters something.
//	ch = getch();
	ch = wgetch(0);
	switch(ch) {
	case 'q': // Quit.
		endwin();
		exit(0);
		break;
	default:
		if (score > best_score)
			best_score = score;
		if (bdigs == 1 && best_score > 9)
			bdigs++;
		else if(bdigs == 2 && best_score > 99)
			bdigs++;
		score = 0;
		sdigs = 1;
		return 1; // Restart game.
	}
	endwin();
	exit(0);
}

/**
 * Draws Flappy to the screen and shows death message if Flappy collides with
 * ceiling or floor. The user can continue to play or can exit if Flappy
 * dies.
 *
 * @param f Flappy the bird!
 *
 * @return 0 if Flappy was drawn as expected, 1 if the game should restart.
 */
int draw_flappy(flappy f) {
	int h = get_flappy_position(f);

	// If Flappy crashed into the ceiling or the floor...
	if (h <= 0 || h >= NUM_ROWS - 1)
		return failure_screen();

	// If Flappy crashed into a pipe...
	if (crashed_into_pipe(f, p1) || crashed_into_pipe(f, p2)) {
		return failure_screen();
	}

	// If going down, don't flap
	if (GRAV * f.t + V0 > 0) {
		mvaddch(h, FLAPPY_COL - 1, 0x83);
	}

	// If going up, flap!
	else {
		mvaddch(h,FLAPPY_COL, 0x83 +((frame & 6)/2));
	}

	return 0;
}

/***
 * 
 * Add Graphics replacements for text
 * 
 * Agon-style
 * 
 *
 */
void init_graphics() {

		// lets allocate all the colours we need....
// Colour lookup table
// The four FabGL levels are 0x00, 0x55, 0xAA and 0xFF
//
	init_color(0,0,0,0); //black
	init_color(1,0x00,0x55,0x00);
	init_color(2,0x55,0xAA,0x00);
	init_color(3,0x00,0xAA,0x00);
	init_color(4,0x00,0xff,0x00);
	init_color(5,0x55,0xFF,0x55);
	init_color(6,0x55,0x55,0x00);
	init_color(7,0x55,0x55,0x55);
	init_color(8,0xAA,0xAA,0xAA);
	/*
	init_color(9,0xAA,0xAA,0x55);
	init_color(10,0xAA,0xAA,0x00);
	init_color(11,0xAA,0xAA,0xFF);
	init_color(12,0x55,0x00,0x55);
	init_color(13,0xAA,0xFF,0x55);
	*/
	/*
	init_color( 9,0xFF,0xFF,0x00);
	init_color(10,0xAA,0x00,0x00);
	init_color(11,0xFF,0x55,0x00);
	init_color(12,0x55,0x55,0x00);
	init_color(13,0xFF,0xAA,0x00);
	*/
	init_color( 9,0x00,0xFF,0xFF);
	init_color(10,0x00,0x00,0xAA);
	init_color(11,0x00,0x55,0xFF);
	init_color(12,0x00,0x55,0x55);
	init_color(13,0xAA,0xFF,0xFF);
	init_color(14,0x55,0xAA,0xFF); //sky
	init_color(15,255,255,255);//white

	    uint32_t pipedata[] = {
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
//		0x00000000,0x00000000,0x00000000,0xFF555555,0xFF555555,0xFF005500,0xFF408000,0xFF408000,0xFF408000,0xFF408000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF40F000,0xFF408000,0xFF408000,0xFF408000,0xFF408000,0xFF408000,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,0x00000000,0x00000000,
    };
	vdp_adv_select_bitmap( 0x80);	//buffer for pipe main section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 56, 8, pipedata );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x80, 0x80 );
	    uint32_t topdata[] = {
		0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
    };
	vdp_adv_select_bitmap( 0x81);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 56, 8, topdata );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x81, 0x81 );
	    uint32_t bottomdata[] = {
		0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFF55FF55,0xFF55FF55,0xFF55FF55,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00FF00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF00AA00,0xFF005500,0xFF005500,0xFF005500,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF000000,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF005500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555500,0xFF555555,0xFF555555,
		0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
    };
	vdp_adv_select_bitmap( 0x82);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 56, 8, bottomdata );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x82, 0x82 );


	    uint32_t birdfalldata[] = {
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFEDAB50,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFEDAB50,0xFFF9E6CF,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFEDAB50,0xFFF9E6CF,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFED7614,0xFF8E251D,0xFFEDAB50,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFEDAB50,0xFFF9E6CF,0xFFEDAB50,0xFF8E251D,0x00000000,
0xFF8E251D,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,
0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFFF5000,0xFF8E251D,
0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000
    };
	vdp_adv_select_bitmap( 0x83);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 16, 18, birdfalldata );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x83, 0x83 );

	    uint32_t bird2data[] = {
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFFFA214,0xFF8E251D,0x00000000,
0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,
0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFED7614,0xFFFF5000,0xFF8E251D,
0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFFF5000,0xFF8E251D,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000
    };
	vdp_adv_select_bitmap( 0x84);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 16, 18, bird2data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x84, 0x84 );

	    uint32_t bird3data[] = {
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFFFA214,0xFF8E251D,0x00000000,
0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFF8E251D,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFFF5000,0xFF8E251D,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000
    };
	vdp_adv_select_bitmap( 0x85);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 16, 18, bird3data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x85, 0x85 );

	    uint32_t bird4data[] = {
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFF8E251D,0xFFF9E6CF,0xFF8E251D,0x00000000,0x00000000,
0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFFA214,0xFFF9E6CF,0xFFFFA214,0xFF8E251D,0x00000000,
0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFFFA214,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,
0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFFFF5000,0xFFFF5000,0xFFED7614,0xFFFF5000,0xFF8E251D,
0x00000000,0x00000000,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFFFA214,0xFFFFA214,0xFFED7614,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,
0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFFED7614,0xFF8E251D,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0xFF8E251D,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000
    };
	vdp_adv_select_bitmap( 0x86);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 16, 18, bird4data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x86, 0x86 );


	    uint32_t floor1data[] = {
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080
    };
	vdp_adv_select_bitmap( 0x88);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 8, 24, floor1data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x88, 0x88 );

	    uint32_t floor2data[] = {
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080
    };
	vdp_adv_select_bitmap( 0x89);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 8, 24, floor2data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x89, 0x89 );

	    uint32_t floor3data[] = {
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080
    };
	vdp_adv_select_bitmap( 0x8A);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 8, 24, floor3data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x8A, 0x8A );

	    uint32_t floor4data[] = {
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,0xFF402040,
0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,0xFF555555,
0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,0xFF808040,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFFAAFF55,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,
0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFF55AA00,0xFFAAFF55,0xFFAAFF55,0xFFAAFF55,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,
0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080,0xFFC0C080
    };
	vdp_adv_select_bitmap( 0x8B);	//buffer for top end pipe section
	// VDU 23, 27, 1, w; h; b1, b2 ... bn: Load colour bitmap data into current bitmap
	vdp_load_bitmap( 8, 24, floor4data );
	// VDU 23, 0, &92, char, bitmapId;: Map character char to display bitmapId
	vdp_map_char_to_bitmap( 0x8B, 0x8B );

		return;
}


/**
 * Print a splash screen and show a progress bar. NB the ASCII art was
 * generated by patorjk.com.
 */
void splash_screen() {
	int i;
	int r = NUM_ROWS / 2 - 6;
	int c = NUM_COLS / 2 - 22;

	for(i=0;i<2;i++)
	{
	// Print the title.
		vdp_set_text_colour(14+128 ); //directly set sky blue background
		clear();
		mvprintw(r, c,     " ___ _                       ___ _        _ ");
		mvprintw(r + 1, c, "| __| |__ _ _ __ _ __ _  _  | _ |_)_ _ __| |");
		mvprintw(r + 2, c, "| _|| / _` | '_ \\ '_ \\ || | | _ \\ | '_/ _` |");
		mvprintw(r + 3, c, "|_| |_\\__,_| .__/ .__/\\_, | |___/_|_| \\__,_|");
		mvprintw(r + 4, c, "           |_|  |_|   |__/                  ");
		mvprintw(NUM_ROWS / 2 + 1, NUM_COLS / 2 - 10,
				"Press <up> to flap!");
	
		// Print the progress bar.
		mvprintw(PROG_BAR_ROW, NUM_COLS / 2 - PROG_BAR_LEN / 2 - 1, "[");
		mvprintw(PROG_BAR_ROW, NUM_COLS / 2 + PROG_BAR_LEN / 2, "]");
		refresh();
	}
	for(i = 0; i < PROG_BAR_LEN; i++) {
//		usleep(1000000 * START_TIME_SEC / (float) PROG_BAR_LEN);
//		napms(500 * START_TIME_SEC / (float) PROG_BAR_LEN);
		napms(1000 * START_TIME_SEC / (float) PROG_BAR_LEN);
				 //vdp_set_text_colour(i+128 );
		mvprintw(PROG_BAR_ROW, NUM_COLS / 2 - PROG_BAR_LEN / 2 + i, "=");
		refresh(); // vdp_set_text_colour(i+128 );
		mvprintw(PROG_BAR_ROW, NUM_COLS / 2 - PROG_BAR_LEN / 2 + i, "=");
		refresh();	
	}
//	usleep(1000000 * 0.5);
	napms(500 * 0.5);
}

//------------------------------------ Main -----------------------------------

int main()
{
	int leave_loop = 0;
	int ch;
	flappy f;
	int restart = 1;

//	srand(time(NULL));
	srand(clock()); //clock works even if you don't have RTC

	// Initialize ncurses
	initscr();
	raw();					// Disable line buffering
	keypad(stdscr, TRUE);
	noecho();				// Don't echo() for getch
	curs_set(0);
	timeout(0);
	init_graphics();
/*
	vdp_set_text_colour(22+128 ); //directly set sky blue background
	clear();
*/
	splash_screen();

	while(!leave_loop) {

		// If we're just starting a game then do some initializations.
		if (restart) {
			timeout(0); // Don't block on input.

			// Start the pipes just out of view on the right.
			p1.center = (int)(1.2 * (NUM_COLS - 1));
			p1.opening_height = rand() / ((float) INT_MAX) * 0.5 + 0.25;
			p2.center = (int)(1.75 * (NUM_COLS - 1));
			p2.opening_height = rand() / ((float) INT_MAX) * 0.5 + 0.25;

			// Initialize flappy
			f.h0 = NUM_ROWS / 2;
			f.t = 0;
			restart = 0;
		}

//		usleep((unsigned int) (1000000 / TARGET_FPS));
		napms((unsigned int) (1000 / TARGET_FPS));

		// Process keystrokes.
//		ch = -1;
//		ch = getch();
		ch = wgetch(stdscr);
		switch (ch) {
		case 'q': // Quit.
			endwin();
			exit(0);
			break;
		case KEY_UP: // Give Flappy a boost!
			f.h0 = get_flappy_position(f);
			f.t = 0;
			break;
		default: // Let Flappy fall along his parabola.
			f.t++;
		}

		clear();
		//vdp_set_text_colour(COLOR_WHITE + 8 ); // because my new graphic pipes turn off bright white....
		// Print "moving" floor and ceiling
		draw_floor_and_ceiling(frame & 3);

		// Update pipe locations and draw them.
//		draw_pipe(p1, '|', '=', '=', 0, NUM_ROWS - 1); //original version
//		draw_pipe(p2, '|', '=', '=', 0, NUM_ROWS - 1);
		draw_pipe(p1, 0x80, 0x81, 0x82, 0, NUM_ROWS - 1); //replacing the ASCII chars with the replaced bitmap characters
		draw_pipe(p2, 0x80, 0x81, 0x82, 0, NUM_ROWS - 1);

		vdp_set_text_colour(14+128 ); //attempt at sky blue background
		pipe_refresh(&p1);
		pipe_refresh(&p2);

		// Draw Flappy. If Flappy crashed and user wants a restart...
		if(draw_flappy(f)) {
			restart = 1;
			continue; // ...then restart the game.
		}
		vdp_set_text_colour(COLOR_WHITE + 8 ); // because my new graphic pipes turn off bright white....
		mvprintw(NUM_ROWS + FLOOR_ROWS, SCORE_START_COL - bdigs - sdigs,
				" Score: %d  Best: %d", score, best_score);

		// Display all the chars for this frame.
		refresh();
		frame++;
	}

	endwin();

	return 0;
}
